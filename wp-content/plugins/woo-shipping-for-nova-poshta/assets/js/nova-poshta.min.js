jQuery(document).ready(function(){var o=function(o){var n={},e=o("#billing_nova_poshta_region, #billing_nova_poshta_city, #billing_nova_poshta_warehouse"),t=o("#billing_nova_poshta_region"),i=o("#billing_nova_poshta_city"),a=o("#billing_nova_poshta_warehouse"),r=o("#shipping_nova_poshta_region, #shipping_nova_poshta_city, #shipping_nova_poshta_warehouse"),s=o("#shipping_nova_poshta_region"),c=o("#shipping_nova_poshta_city"),p=o("#shipping_nova_poshta_warehouse"),h=o("#billing_address_1, #billing_address_2, #billing_city, #billing_state, #billing_postcode"),u=o("#shipping_address_1, #shipping_address_2, #shipping_city, #shipping_state, #shipping_postcode"),l=o("input[name^=shipping_method][type=radio]"),d=o("#ship-to-different-address-checkbox"),_=function(){return d.is(":checked")},f=function(){var n=o("input[name^=shipping_method][type=radio]:checked").val();return n||(n=o("input#shipping_method_0").val()),"nova_poshta_shipping_method"===n},v=function(){e.each(function(){o(this).removeAttr("disabled").closest(".form-row").show()}),b()},g=function(){e.each(function(){o(this).attr("disabled","disabled").closest(".form-row").hide()}),m()},m=function(){h.each(function(){o(this).removeAttr("disabled").closest(".form-row").show()})},b=function(){h.each(function(){o(this).attr("disabled","disabled").closest(".form-row").hide()})},y=function(){r.each(function(){o(this).removeAttr("disabled").closest(".form-row").show()}),j()},w=function(){r.each(function(){o(this).attr("disabled","disabled").closest(".form-row").hide()}),N()},N=function(){u.each(function(){o(this).removeAttr("disabled").closest(".form-row").show()})},j=function(){u.each(function(){o(this).attr("disabled","disabled").closest(".form-row").hide()})},x=function(){g(),w()},P=function(){x(),f()&&(_()?y():v())},A=function(){o(document).on("change",l,function(){P()}),o(document).on("change",d,function(){P()}),o(document.body).bind("updated_checkout",function(){P()}),P()},S=function(){t.on("change",function(){var n=this.value;o.ajax({url:NovaPoshtaHelper.ajaxUrl,method:"POST",data:{action:NovaPoshtaHelper.getCitiesAction,parent_area_ref:n},success:function(n){try{var e=JSON.parse(n);i.find("option").remove(),o.each(e,function(n,e){i.append(o("<option></option>").attr("value",n).text(e))}),a.find("option").remove()}catch(t){console.log("Error. Response from server was: "+n)}},error:function(){console.log("Error.")}})}),i.on("change",function(){var n=this.value;o.ajax({url:NovaPoshtaHelper.ajaxUrl,method:"POST",data:{action:NovaPoshtaHelper.getWarehousesAction,parent_area_ref:n},success:function(n){try{var e=JSON.parse(n);a.find("option").remove(),o.each(e,function(n,e){a.append(o("<option></option>").attr("value",n).text(e))})}catch(t){console.log("Error. Response from server was: "+n)}},error:function(){console.log("Error.")}})}),s.on("change",function(){var n=this.value;o.ajax({url:NovaPoshtaHelper.ajaxUrl,method:"POST",data:{action:NovaPoshtaHelper.getCitiesAction,parent_area_ref:n},success:function(n){try{var e=JSON.parse(n);c.find("option").remove(),o.each(e,function(n,e){c.append(o("<option></option>").attr("value",n).text(e))}),p.find("option").remove()}catch(t){console.log("Error. Response from server was: "+n)}},error:function(){console.log("Error.")}})}),c.on("change",function(){var n=this.value;o.ajax({url:NovaPoshtaHelper.ajaxUrl,method:"POST",data:{action:NovaPoshtaHelper.getWarehousesAction,parent_area_ref:n},success:function(n){try{var e=JSON.parse(n);p.find("option").remove(),o.each(e,function(n,e){p.append(o("<option></option>").attr("value",n).text(e))})}catch(t){console.log("Error. Response from server was: "+n)}},error:function(){console.log("Error.")}})})};return n.init=function(){A(),S()},n}(jQuery),n=function(o){var n={},e=function(){var n=o("input[name^=shipping_method][type=radio]:checked").val();return n||(n=o("input#shipping_method_0").val()),"nova_poshta_shipping_method"===n},t=function(){o("#calc_shipping_country").find("option").each(function(){"UA"!==o(this).val()&&o(this).remove()}),o("#calc_shipping_state_field").hide();var n=o('<input type="hidden" id="calc_nova_poshta_shipping_method" value="nova_poshta_shipping_method" name="shipping_method">'),e=o('<input type="hidden" id="calc_nova_poshta_shipping_city" name="calc_nova_poshta_shipping_city">');o("#calc_shipping_city_field").append(e).append(n);var t=o("#calc_shipping_city");t.autocomplete({source:function(o,n){jQuery.ajax({type:"POST",url:NovaPoshtaHelper.ajaxUrl,data:{action:NovaPoshtaHelper.getCitiesByNameSuggestionAction,name:o.term},success:function(o){var e=JSON.parse(o);n(jQuery.map(e,function(o){return{label:o.description,value:o.ref}}))}})},focus:function(o,n){return t.val(n.item.label),!1},select:function(o,n){return t.val(n.item.label),e.val(n.item.value),!1}}),o("form.woocommerce-shipping-calculator").on("submit",function(){if("UA"!==o("#calc_shipping_country").val())return!1})};return n.init=function(){o(document.body).bind("updated_wc_div updated_shipping_method",function(){e()&&t()}),e()&&t()},n}(jQuery);o.init(),n.init()});